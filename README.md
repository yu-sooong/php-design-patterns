# ä»£ç†æ¨¡å¼ Proxy

**ç›®çš„ : é€šå¸¸ç”¨æ–¼æ§åˆ¶å°æŸå€‹ç‰©ä»¶çš„è¨ªå•ã€‚åœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼ŒProxy å¯ä»¥ç”¨ä¾†å¯¦ç¾å¿«å–ã€é ç¨‹ä»£ç†ã€ä¿è­·ä»£ç†ç­‰åŠŸèƒ½**

### æƒ…å¢ƒ
- å°‡è»å‡ºå¸­æ•µåœ‹é¤å®´æ™‚ï¼Œæ‰¾ä¸€å€‹ä»£ç†äºº(é•·å¾—å¾ˆåƒçš„)ã€è‹¥é€™æ™‚å€™é‡åˆ°äº†é´»é–€å®´ã€æœ¬é«”ä¹Ÿæœƒæ²’äº‹
- å‡ºå·®å·¥ä½œäº†éœ€è¦æ‰¾ä¸€å€‹è·å‹™ä»£ç†äººï¼Œæ­¤ä»£ç†äººå¯ä»¥å…ˆåšåˆæ­¥çš„æ±ºå®š

---
### ä¾‹å­: åœ–ç‰‡åŠ è¼‰çš„æƒ…å¢ƒä¾†èªªæ˜ ğŸ¤­

æœ‰ä¸‰å€‹é¡åˆ¥ï¼š

- Imageï¼ˆä¸»é¡Œï¼‰ï¼šå®šç¾©äº† RealImage å’Œ Proxy çš„å…±åŒä»‹é¢ï¼Œå¯ä»¥æ˜¯ä¸€å€‹æŠ½è±¡é¡åˆ¥æˆ–ä»‹é¢ã€‚  
- RealImageï¼ˆçœŸå¯¦ä¸»é¡Œï¼‰ï¼šå¯¦éš›åŸ·è¡Œå·¥ä½œçš„é¡åˆ¥ã€‚  
- ProxyImageï¼ˆä»£ç†ï¼‰ï¼šæ§åˆ¶å° RealImage çš„è¨ªå•ï¼Œå¯ä»¥åŸ·è¡Œé¡å¤–çš„å·¥ä½œï¼Œä¾‹å¦‚å¿«å–æˆ–æ¬Šé™æª¢æŸ¥ã€‚  

---
![é¡åˆ¥åœ–](https://raw.githubusercontent.com/yu-sooong/ting-image/main/php-desing-patterns/proxy.drawio.png)

---
### æ¸¬è©¦
å› ç‚ºæˆ‘å€‘ä½¿ç”¨äº† ProxyImage åšä»£ç†åœ¨ç¬¬ä¸€æ¬¡ç²å–åœ–ç‰‡æ™‚æœƒå¾ç¶²è·¯ä¸ŠåŠ è¼‰ï¼Œç¬¬äºŒæ¬¡å°±æœƒç›´æ¥é¡¯ç¤º
ä½¿æƒ…æ™¯å¾ˆé©åˆä½¿ç”¨å¿«å–çš„æ©Ÿåˆ¶ä¿è­·æœ¬é«”

```php
        $ImgName1 = "image1.jpg";
        $ImgName2 = "image2.jpg";
        // å®¢æˆ¶ç«¯ç¨‹å¼ç¢¼
        $image1 = new ProxyImage($ImgName1);
        $image2 = new ProxyImage($ImgName2);

        // æ¨¡æ“¬è¼‰å…¥åœ–åƒ
        ob_start(); // æ•ç²è¼¸å‡º
        $image1->display(); // å¾ç¶²çµ¡åŠ è¼‰åœ–ç‰‡ï¼šimage1.jpgé¡¯ç¤ºåœ–ç‰‡ï¼šimage1.jpg
        $output = ob_get_clean(); // ç²å–æ•ç²çš„è¼¸å‡º

        $this->assertStringContainsString("å¾ç¶²çµ¡åŠ è¼‰åœ–ç‰‡ï¼š{$ImgName1}é¡¯ç¤ºåœ–ç‰‡ï¼š$ImgName1", $output);

        ob_start(); // æ•ç²è¼¸å‡º
        $image1->display();
        $output = ob_get_clean(); // ç²å–æ•ç²çš„è¼¸å‡º

        // é€™æ™‚å› ç‚ºå·²ç¶“è¼‰å…¥éäº†ï¼Œæ‰€ä»¥ç›´æ¥é¡¯ç¤ºåœ–ç‰‡ï¼Œä¸éœ€è¦å¾ç¶²è·¯åŠ è¼‰åœ–ç‰‡
        $this->assertStringContainsString("é¡¯ç¤ºåœ–ç‰‡ï¼š$ImgName1", $output);

        $this->assertTrue(true);
```

